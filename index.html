<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Snake Game</title>
    
    <style>
/* CSS */
        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุณู ุชูุณููุงุช CSS ุงูุนุงู. ูุญุฏุฏ ุงูุชุฎุทูุท ุงูุฃุณุงุณู ููุตูุญุฉ ูุงูุชูุงุนู ูุน ูุถุน ุงูุฅุถุงุกุฉ (Dark/Light Mode). */
        /* ================================================================= */
        /* ุงุฎุชูุงุฑ ุฌุณู ุงูุตูุญุฉ (body) ูุชุทุจูู ุงูุชูุณููุงุช ุงูุนุงูุฉ */
        body {
            /* ุชุนููู ุฎุท ุงููุชุงุจุฉ ุงูุฃุณุงุณู */
            font-family: Arial, sans-serif;
            /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ ูุชูุณูุท ุงููุญุชูู */
            display: flex;
            /* ุชูุณูุท ุงููุญุชูู ุฃูููุงู */
            justify-content: center;
            /* ุชูุณูุท ุงููุญุชูู ุนููุฏูุงู */
            align-items: center;
            /* ุงูุชุฃูุฏ ูู ุฃู ุงูุญุฏ ุงูุฃุฏูู ูุงุฑุชูุงุน ุงูุตูุญุฉ ูููุฃ ุงูุดุงุดุฉ ุจุงููุงูู */
            min-height: 100vh;
            /* ุฅุฒุงูุฉ ุงูููุงูุด ุงูุงูุชุฑุงุถูุฉ ุญูู ุงูุตูุญุฉ */
            margin: 0;
            /* ุชุนููู ููู ุงูุฎูููุฉ ุงููุงุชุญ ุงูุงูุชุฑุงุถู */
            background-color: #f0f0f0;
            /* ุฅุถุงูุฉ ุงูุชูุงู ุณูุณ ูุชุบููุฑ ููู ุงูุฎูููุฉ ุนูุฏ ุชุจุฏูู ุงููุถุน */
            transition: background-color 0.3s;
        }

        /* ุชูุณูู ุฎุงุต ูุฌุณู ุงูุตูุญุฉ ุนูุฏ ุชูุนูู ูุถุน ุงูุฅุถุงุกุฉ ุงูุฏุงูู (Dark Mode) */
        body.dark-mode #gameContainer {
            /* ุชุบููุฑ ููู ุฎูููุฉ ุญุงููุฉ ุงููุนุจุฉ ุฅูู ููู ุฏุงูู */
            background-color: #2c2c2c;
        }

        /* ุชูุณูู ุญุงููุฉ ุงููุนุจุฉ ุงูุฑุฆูุณูุฉ */
        #gameContainer {
            /* ุชูุณูุท ุงููุตูุต ุฏุงุฎู ุงูุญุงููุฉ */
            text-align: center;
            /* ุฅุถุงูุฉ ุญุดูุงุช ุฏุงุฎููุฉ */
            padding: 20px;
            /* ุชุฏููุฑ ุฒูุงูุง ุงูุญุงููุฉ */
            border-radius: 10px;
            /* ุฅุถุงูุฉ ุธู ุฎููู ููุญุงููุฉ ูุฅุจุฑุงุฒูุง */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            /* ุชุนููู ููู ุงูุฎูููุฉ ุงููุงุชุญ ุงูุงูุชุฑุงุถู ููุญุงููุฉ */
            background-color: white;
            /* ุฅุถุงูุฉ ุงูุชูุงู ุณูุณ ูุฌููุน ุงูุชุบููุฑุงุช */
            transition: all 0.3s;
        }

        /* ----------------------------------------------------------------- */
        /* ุชุนููู ูุฑุนู: ุชูุณูู ุฎุงุต ูุชูููู ุงููุญุงุฐุงุฉ ุงูุฌุงูุจูุฉ ุจูู ููุญุฉ ุงููุนุจุฉ ูุฃุฒุฑุงุฑ ุงูุฃุณูู */
        /* ----------------------------------------------------------------- */
        /* ูุณู ูุฌูุน ุจูู ููุญุฉ ุงููุนุจุฉ ูุนูุงุตุฑ ุงูุชุญูู (ุงูุฃุณูู) */
        #gameAndControls {
            /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ ูุชูุณูู ุงูุนูุงุตุฑ ุงูุฏุงุฎููุฉ */
            display: flex;
            /* ุชูุณูุท ุงูุนูุงุตุฑ ุฃูููุงู */
            justify-content: center;
            /* ููุญุงุฐุงุฉ ุงูุฃุณูู ุนููุฏูุงู ูุน ููุชุตู ุงูููุญุฉ */
            align-items: center;
            /* ูุณุงูุฉ ุจูู ููุญุฉ ุงููุนุจุฉ ูุฃุฒุฑุงุฑ ุงูุฃุณูู */
            gap: 20px;
        }
        /* ----------------------------------------------------------------- */

        /* ุชูุณูู ูุฌููุนุงุช ุงูุฅุนุฏุงุฏุงุช ูู ุดุงุดุฉ ุงูุจุฏุงูุฉ */
        .settings-group {
            /* ุฅุถุงูุฉ ููุงูุด ุฑุฃุณูุฉ */
            margin: 15px 0;
            /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ */
            display: flex;
            /* ุชูุฒูุน ุงูุนูุงุตุฑ ุฏุงุฎู ุงููุฌููุนุฉ ุจุดูู ูุชุณุงูู (Label ู Input/Select) */
            justify-content: space-between;
            /* ูุญุงุฐุงุฉ ุงูุนูุงุตุฑ ุนููุฏูุงู ูู ุงูููุชุตู */
            align-items: center;
        }

        /* ุชูุณูู ุฒุฑ "ุจุฏุก ุงููุนุจุฉ" ูุฒุฑ ุชุจุฏูู ุงููุถุน */
        #startButton,
        #themeToggle {
            /* ุญุดูุฉ ุฏุงุฎููุฉ ููุฒุฑ */
            padding: 10px 20px;
            /* ููุงูุด ุญูู ุงูุฒุฑ */
            margin: 10px;
            /* ููู ุงูุฎูููุฉ ุงูุฃุฒุฑู ุงูุฃุณุงุณู */
            background-color: #3498db;
            /* ููู ุงููุต ุงูุฃุจูุถ */
            color: white;
            /* ุฅุฒุงูุฉ ุงูุญุฏูุฏ ุงูุงูุชุฑุงุถูุฉ ููุฒุฑ */
            border: none;
            /* ุชุฏููุฑ ุฒูุงูุง ุงูุฒุฑ */
            border-radius: 5px;
            /* ุชุบููุฑ ุดูู ุงููุคุดุฑ ุนูุฏ ุงููุฑูุฑ ููู ุงูุฒุฑ */
            cursor: pointer;
            /* ุฅุถุงูุฉ ุงูุชูุงู ุณูุณ ูุชุบููุฑ ููู ุงูุฎูููุฉ */
            transition: background-color 0.3s;
        }

        /* ุชุฃุซูุฑ ุงูุชูุฑูุฑ (Hover) ุนูู ุฒุฑ "ุจุฏุก ุงููุนุจุฉ" ูุฒุฑ ุชุจุฏูู ุงููุถุน */
        #startButton:hover,
        #themeToggle:hover {
            /* ุชุบููุฑ ููู ุงูุฎูููุฉ ุฅูู ุฏุฑุฌุฉ ุฃุบูู ูู ุงูุฃุฒุฑู */
            background-color: #2980b9;
        }

        /* ุชูุณูู ููุญุฉ ุงููุนุจุฉ (Canvas) */
        #gameBoard {
            /* ุฅุฎูุงุก ุงูููุญุฉ ุจุดูู ุงูุชุฑุงุถู (ุชุธูุฑ ุนูุฏ ุจุฏุก ุงููุนุจุฉ) */
            display: none;
            /* ุฅุถุงูุฉ ุญุฏูุฏ ูููุญุฉ ุงููุนุจุฉ */
            border: 2px solid #3498db;
            /* ุชูุณูุท ุงูููุญุฉ ุฃูููุงู */
            margin: 0 auto;
        }

        /* ุฅุฎูุงุก ุดุงุดุฉ "ุงููุนุจุฉ ุงูุชูุช" ูุนุฑุถ ุงููุชูุฌุฉ ุจุดูู ุงูุชุฑุงุถู */
        #gameOverlay,
        #scoreDisplay {
            display: none;
        }

        /* ุชุฃุซูุฑ ุญุฑูู ุนูุฏ ุฏุฎูู ุงููุนุจุฉ (Game Enter) */
        .game-enter {
            animation: gameEnter 0.5s ease-out;
        }

        /* ุชุฃุซูุฑ ุญุฑูู ูุงูุฒูุงู ุงูุนูุงุตุฑ ููุฃุนูู */
        .game-slide-up {
            animation: slideUp 0.3s ease-out;
        }

        /* ุชุนุฑูู ุงูุญุฑูุฉ gameEnter (ุชุธูุฑ ุจุจุทุก ูุชูุจุฑ ููููุงู) */
        @keyframes gameEnter {
            from {
                /* ุชุจุฏุฃ ุจุดูุงููุฉ ุชุงูุฉ */
                opacity: 0;
                /* ุชุจุฏุฃ ุจุญุฌู ุฃุตุบุฑ ููููุงู */
                transform: scale(0.9);
            }

            to {
                /* ุชูุชูู ุจุดูุงููุฉ ูุงููุฉ */
                opacity: 1;
                /* ุชูุชูู ุจุญุฌููุง ุงูุทุจูุนู */
                transform: scale(1);
            }
        }

        /* ุชุนุฑูู ุงูุญุฑูุฉ slideUp (ุชูุฒูู ููุฃุนูู ูุชุธูุฑ) */
        @keyframes slideUp {
            from {
                /* ุชุจุฏุฃ ูู 20 ุจูุณู ุฃุณูู ูููุนูุง ุงูููุงุฆู */
                transform: translateY(20px);
                /* ุชุจุฏุฃ ุจุดูุงููุฉ ุชุงูุฉ */
                opacity: 0;
            }

            to {
                /* ุชูุชูู ูู ูููุนูุง ุงูุทุจูุนู */
                transform: translateY(0);
                /* ุชูุชูู ุจุดูุงููุฉ ูุงููุฉ */
                opacity: 1;
            }
        }

        /* ุชุนููู ูุฑุนู: ุชูุณูู ุฃุฒุฑุงุฑ ุงูุฃุณูู ููุชุญูู ูู ุงููุนุจุฉ ุนุจุฑ ุดุงุดุฉ ุงูููุณ ุฃู ุงููุงูุณ */
        .arrows {
            /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ ูุชูุณูู ุงูุฃุณูู */
            display: flex;
            /* ุชุฑุชูุจ ุงูุนูุงุตุฑ ุนููุฏูุงู */
            flex-direction: column;
            /* ุชูุณูุท ุงูุนูุงุตุฑ ุฃูููุงู */
            align-items: center;
        }

        /* ุชูุณูู ุงููุฌููุนุฉ ุงูุนูููุฉ ูุงูุณูููุฉ ูู ุงูุฃุณูู */
        .upper,
        .lower {
            /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ */
            display: flex;
            /* ุชูุณูุท ุงูุฃุฒุฑุงุฑ ุฏุงุฎู ุงููุฌููุนุฉ */
            justify-content: center;
        }

        /* ุชูุณูู ุงููุฌููุนุฉ ุงููุณุทู ูู ุงูุฃุณูู (ุงููุณุงุฑ ูุงููููู) */
        .mid {
            /* ุงุณุชุฎุฏุงู ููููุณ ุจููุณ */
            display: flex;
            /* ุชุจุงุนุฏ ุจูู ุงูุฃุฒุฑุงุฑ (ูุณุงุฑ/ูุณุท/ูููู) */
            justify-content: space-between;
            /* ุชุญุฏูุฏ ุนุฑุถ ุงููุฌููุนุฉ ุงููุณุทู */
            width: 150px;
        }

        /* ุชูุณูู ุงูุฃุฒุฑุงุฑ ุฏุงุฎู ูุณู ุงูุฃุณูู */
        .arrows button {
            /* ููู ุฎูููุฉ ูุงุชุญ ููุฃุฒุฑุงุฑ */
            background-color: #eee;
            /* ุญุฏูุฏ ุฑูุงุฏูุฉ ุฎูููุฉ */
            border: 1px solid #ccc;
            /* ุญุดูุฉ ุฏุงุฎููุฉ */
            padding: 5px;
            /* ุชุฏููุฑ ุงูุฒูุงูุง */
            border-radius: 5px;
            /* ููุงูุด ุญูู ุงูุฃุฒุฑุงุฑ */
            margin: 5px;
        }

        /* ุชูุณูู ุงูุตูุฑุฉ ุฏุงุฎู ุฃุฒุฑุงุฑ ุงูุฃุณูู */
        .arrows button img {
            /* ุชุญุฏูุฏ ุนุฑุถ ุงูุตูุฑุฉ */
            width: 30px;
            /* ุชุญุฏูุฏ ุงุฑุชูุงุน ุงูุตูุฑุฉ */
            height: 30px;
            /* ุชุทุจูู ุชุฏููุฑ ุนูู ุงูุตูุฑุฉ ุจูุงุกู ุนูู ูุชุบูุฑ CSS ูุฎุตุต */
            transform: rotate(var(--rotation, 0deg));
        }

        /* ุชุฏููุฑ ุณูู ุงูุงุชุฌุงู ููุฃุนูู (Up) ุจููุฏุงุฑ 270 ุฏุฑุฌุฉ */
        .up img {
            --rotation: 270deg;
        }

        /* ุชุฏููุฑ ุณูู ุงูุงุชุฌุงู ููุฃุณูู (Down) ุจููุฏุงุฑ 90 ุฏุฑุฌุฉ */
        .down img {
            --rotation: 90deg;
        }

        /* ุชุฏููุฑ ุณูู ุงูุงุชุฌุงู ูููุณุงุฑ (Left) ุจููุฏุงุฑ 180 ุฏุฑุฌุฉ */
        .left img {
            --rotation: 180deg;
        }
    </style>
</head>

<body>
    <div id="gameContainer">
        <button id="themeToggle" aria-label="Toggle Theme">๐</button>
        <div id="startScreen">
            <h1>Snake Game Settings</h1>
            <div class="settings-group">
                <label for="difficulty">Difficulty:</label>
                <select id="difficulty">
                    <option value="easy">Easy</option>
                    <option value="medium" selected>Medium</option>
                    <option value="hard">Hard</option>
                </select>
            </div>


            <div class="settings-group">
                <label for="boardSize">Board Size:</label>
                <select id="boardSize">
                    <option value="400">Small (400x400)</option>
                    <option value="600" selected>Medium (600x600)</option>
                    <option value="800">Large (800x800)</option>
                </select>
            </div>


            <div class="settings-group">
                <label for="snakeColor">Snake Color:</label>
                <input type="color" id="snakeColor" value="#3498db">
            </div>


            <div class="settings-group">
                <label for="foodColor">Food Color:</label>
                <input type="color" id="foodColor" value="#e74c3c">
            </div>
            <button id="startButton">Start Game</button>
        </div>

        <div id="gameAndControls">
            <div id="gameElements"> 
                <canvas id="gameBoard" width="600" height="600"></canvas>
                <div id="scoreDisplay">Score: 0</div>
                <div id="gameOverlay">
                    <h2>Game Over!</h2>
                    <p id="finalScore">Score: 0</p>
                </div>
            </div>

            <div class="arrows" style="display: none;">
                <div class="upper">
                    <button class="up" onclick="simulateKeyPress(38)">
                        <img src="./Image/arrow.png" alt="">
                    </button>
                </div>

                <div class="mid">
                    <button class="left" onclick="simulateKeyPress(37)">
                        <img src="./Image/arrow.png" alt="">
                    </button>
                    <input type="button" value="GG" class="GG" onclick="showStartScreen()">
                    <button class="right" onclick="simulateKeyPress(39)">
                        <img src="./Image/arrow.png" alt="">
                    </button>
                </div>

                <div class="lower">
                    <button class="down" onclick="simulateKeyPress(40)">
                        <img src="./Image/arrow.png" alt="">
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุณู JavaScript ุงูุนุงู. ูุญุชูู ุนูู ูุชุบูุฑุงุช ุงูุญุงูุฉุ ููุธุงุฆู ุงูุชุญูู ูู ุงููุงุฌูุฉุ ูููุทู ุชุจุฏูู ุงููุถุน (Theme Toggle). */
        /* ================================================================= */

        // Theme Toggle Logic
        // ุฌูุจ ุนูุตุฑ ุฒุฑ ุชุจุฏูู ุงููุถุน ุจุงููุนุฑู
        const themeToggle = document.getElementById('themeToggle');

        // ุฅุถุงูุฉ ูุณุชูุน ุญุฏุซ (Event Listener) ููููุฑ ุนูู ุฒุฑ ุชุจุฏูู ุงููุถุน
        themeToggle.addEventListener('click', () => {
            // ุชุจุฏูู ุตูู (class) 'dark-mode' ุนูู ุฌุณู ุงูุตูุญุฉ (body) ูุชุทุจูู ุงูุชูุณูู ุงูุฏุงูู
            document.body.classList.toggle('dark-mode');

            // ุชุญุฏูุซ ุฃููููุฉ ุฒุฑ ุชุจุฏูู ุงููุถุน
            if (document.body.classList.contains('dark-mode')) {
                // ุฅุฐุง ูุงู ุงููุถุน ุฏุงูููุงุ ุงุฌุนู ุงูุฃููููุฉ ุดูุณ (โ๏ธ)
                themeToggle.textContent = 'โ๏ธ';
            } else {
                // ุฅุฐุง ูุงู ุงููุถุน ูุงุชุญูุงุ ุงุฌุนู ุงูุฃููููุฉ ููุฑ ู ุดูุณ (๐)
                themeToggle.textContent = '๐';
            }
        });

        // Game state and configuration variables
        // ุฌูุจ ุนูุงุตุฑ ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ ุจุงููุนุฑูุงุช
        const startScreen = document.getElementById('startScreen');
        const gameBoard = document.getElementById('gameBoard');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const gameOverlay = document.getElementById('gameOverlay');
        const finalScoreDisplay = document.getElementById('finalScore');
        const startButton = document.getElementById('startButton');
        // ุฌูุจ ุนูุตุฑ ุญุงููุฉ ุงูุฃุณูู ุจุงูุตูู (class) ูุฅุธูุงุฑูุง ูุฅุฎูุงุฆูุง
        const arrowsDiv = document.querySelector('.arrows');
        // ุงูุญุตูู ุนูู ุณูุงู ุงูุฑุณู ุซูุงุฆู ุงูุฃุจุนุงุฏ (2D) ูู ููุญุฉ ุงููุนุจุฉ (Canvas)
        const ctx = gameBoard.getContext('2d');
        // ุฌูุจ ุงูุนูุตุฑ ุงูุญุงูู ููุนุจุฉ ูุงูุชุญูู (ุงูุฐู ูุญุชูู ุงูููุญุฉ ูุงูุฃุณูู)
        const gameAndControls = document.getElementById('gameAndControls');

        // ูุชุบูุฑุงุช ุฅุนุฏุงุฏุงุช ูุญุงูุฉ ุงููุนุจุฉ
        let gridSize, tileCount, snake, food, dx, dy, score, gameSpeed;
        let snakeColor, foodColor;
        // ูุชุบูุฑ ูุญูุธ ูุนุฑูู ุญููุฉ ุงููุนุจุฉ (ูุชุชููู ูู ุฅููุงููุง)
        let gameLoopId;

        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุธููุฉ initializeGame(). ุชููุฆุฉ ุงููุนุจุฉุ ุฌูุจ ุงูุฅุนุฏุงุฏุงุชุ ุฅุฎูุงุก ุดุงุดุฉ ุงูุจุฏุกุ ูุจุฏุก ุญููุฉ ุงููุนุจุฉ. */
        /* ================================================================= */

        // ุฏุงูุฉ ุชููุฆุฉ ุงููุนุจุฉ ูุจุฏุฆูุง
        function initializeGame() {
            // ุฌูุจ ุงูุฅุนุฏุงุฏุงุช ูู ุญููู ุงูุฅุฏุฎุงู ูุงูุงุฎุชูุงุฑ (Select)
            const difficulty = document.getElementById('difficulty').value;
            const boardSize = parseInt(document.getElementById('boardSize').value);
            snakeColor = document.getElementById('snakeColor').value;
            foodColor = document.getElementById('foodColor').value;

            // ุถุจุท ุญุฌู ููุญุฉ ุงููุนุจุฉ (Canvas) ุจูุงุกู ุนูู ุงุฎุชูุงุฑ ุงููุณุชุฎุฏู
            gameBoard.width = boardSize;
            gameBoard.height = boardSize;
            // ุชุญุฏูุฏ ุญุฌู ุงููุฑุจุน ุงููุงุญุฏ (ุงููุญุฏุฉ ุงูุฃุณุงุณูุฉ)
            gridSize = 20;
            // ุญุณุงุจ ุนุฏุฏ ุงููุฑุจุนุงุช ูู ูู ุตู ูุนููุฏ
            tileCount = boardSize / gridSize;

            // ุชุญุฏูุฏ ุณุฑุนุฉ ุงููุนุจุฉ ุจูุงุกู ุนูู ูุณุชูู ุงูุตุนูุจุฉ
            switch (difficulty) {
                case 'easy':
                    gameSpeed = 200; // ููุช ุฃุทูู ุจูู ูู ุชุญุฏูุซ (ุฃุจุทุฃ)
                    break;
                case 'medium':
                    gameSpeed = 150;
                    break;
                case 'hard':
                    gameSpeed = 100; // ููุช ุฃูุตุฑ ุจูู ูู ุชุญุฏูุซ (ุฃุณุฑุน)
                    break;
            }

            // ุฅุนุงุฏุฉ ุชุนููู ุญุงูุฉ ุงููุนุจุฉ:
            // ุชุนููู ููุถุน ุงูุซุนุจุงู ุงูุฃููู (ูู ููุชุตู ุงูููุญุฉ ุชูุฑูุจุงู)
            snake = [{ x: Math.floor(tileCount / 2), y: Math.floor(tileCount / 2) }];
            // ุชูููุฏ ููุถุน ุงูุทุนุงู ุงูุนุดูุงุฆู
            food = generateFood();
            // ุชุนููู ุงุชุฌุงู ุงูุญุฑูุฉ ุงูุฃููู (ูููู)
            dx = 1;
            dy = 0;
            // ุฅุนุงุฏุฉ ุชุนููู ุงููุชูุฌุฉ
            score = 0;

            // ุฅุฎูุงุก ุดุงุดุฉ ุงูุจุฏุงูุฉ ูุงูุชุญุถูุฑ ููุนุจ
            startScreen.style.display = 'none';
            // ุฅุธูุงุฑ ุงูุญุงููุฉ ุงูุฌุฏูุฏุฉ ุงูุชู ุชุฏูุฌ ุงูููุญุฉ ูุงูุฃุณูู (ุชูููู ุงูุชุฎุทูุท ุงูุฌุงูุจู)
            gameAndControls.style.display = 'flex';
            // ุฅุธูุงุฑ ููุญุฉ ุงููุนุจุฉ
            gameBoard.style.display = 'block';
            // ุฅุธูุงุฑ ุนุฑุถ ุงููุชูุฌุฉ
            scoreDisplay.style.display = 'block';
            // ุงูุชุฃูุฏ ูู ุฅุฎูุงุก ุดุงุดุฉ "ุงููุนุจุฉ ุงูุชูุช"
            gameOverlay.style.display = 'none';
            // ุฅุธูุงุฑ ุฃุฒุฑุงุฑ ุงูุฃุณูู
            arrowsDiv.style.display = 'flex';

            // ุจุฏุก ุญููุฉ ุงููุนุจุฉ ุงูุฑุฆูุณูุฉ
            gameLoop();
        }

        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุธููุฉ showStartScreen(). ุชุณุชุฎุฏู ููุนูุฏุฉ ุฅูู ุดุงุดุฉ ุงูุฅุนุฏุงุฏุงุช/ุงูุจุฏุงูุฉ ูุฅููุงู ุงููุนุจุฉ. */
        /* ================================================================= */

        // ุฏุงูุฉ ุงูุนูุฏุฉ ุฅูู ุดุงุดุฉ ุงูุจุฏุงูุฉ ูุฅููุงู ุงููุนุจุฉ
        function showStartScreen() {
            // ุฅููุงู ูุคูุช ุญููุฉ ุงููุนุจุฉ
            clearTimeout(gameLoopId);
            // ุฅุฎูุงุก ุญุงููุฉ ุงููุนุจุฉ ูุนูุงุตุฑ ุงูุชุญูู (ุงูููุญุฉ ูุงูุฃุณูู)
            gameAndControls.style.display = 'none';
            // ุฅุธูุงุฑ ุดุงุดุฉ ุงูุจุฏุงูุฉ
            startScreen.style.display = 'block';
        }

        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุธููุฉ drawGame(). ุชููุฐ ุฎุทูุฉ ูุงุญุฏุฉ ูู ุงููุนุจุฉ (ุชุญุฏูุซ ุงูุญุฑูุฉุ ุงูุฑุณูุ ูุญุต ุงูุชุตุงุฏู). */
        /* ================================================================= */

        // ุฏุงูุฉ ุชูููุฐ ุฎุทูุฉ ูุงุญุฏุฉ ูู ุงููุนุจุฉ
        function drawGame() {
            // ูุณุญ ุงูููุญุฉ ุจุงููุงูู
            clearCanvas();
            // ุชุญุฏูุซ ููุถุน ุงูุซุนุจุงู (ุงูุชุญุฑู ุฃู ุงูุฃูู)
            moveSnake();
            // ุฑุณู ุงูุซุนุจุงู ูู ููุถุนู ุงูุฌุฏูุฏ
            drawSnake();
            // ุฑุณู ุงูุทุนุงู
            drawFood();
            // ูุญุต ุญุฏูุซ ุฃู ุชุตุงุฏู (ุฌุฏุงุฑ ุฃู ุฐุงุชู)
            checkCollision();
            // ุชุญุฏูุซ ุนุฑุถ ุงููุชูุฌุฉ
            updateScore();
        }

        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุธุงุฆู ุงูุฑุณู ุงูุฃุณุงุณูุฉ (Clear, Draw Snake, Draw Food). */
        /* ================================================================= */

        // ุฏุงูุฉ ูุณุญ ููุญุฉ ุงูุฑุณู (Canvas)
        function clearCanvas() {
            // ุชุนููู ููู ุงูุฎูููุฉ ุจูุงุกู ุนูู ูุถุน ุงูุฅุถุงุกุฉ ุงูุญุงูู
            ctx.fillStyle = document.body.classList.contains('dark-mode') ? '#2c2c2c' : '#e6eaf4';
            // ููุก ุงูููุญุฉ ุจุงููุงูู ุจููู ุงูุฎูููุฉ
            ctx.fillRect(0, 0, gameBoard.width, gameBoard.height);
        }

        // ุฏุงูุฉ ุชุญุฏูุซ ููุถุน ุงูุซุนุจุงู ูููุทู ุงูุฃูู
        function moveSnake() {
            // ุญุณุงุจ ููุถุน ุงูุฑุฃุณ ุงูุฌุฏูุฏ ุจูุงุกู ุนูู ุงูุงุชุฌุงู ุงูุญุงูู (dx, dy)
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };
            // ุฅุถุงูุฉ ุงูุฑุฃุณ ุงูุฌุฏูุฏ ุฅูู ููุฏูุฉ ูุตูููุฉ ุงูุซุนุจุงู
            snake.unshift(head);

            // ุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงูุซุนุจุงู ูุฏ ุฃูู ุงูุทุนุงู
            if (head.x === food.x && head.y === food.y) {
                // ุฒูุงุฏุฉ ุงููุชูุฌุฉ
                score++;
                // ุชูููุฏ ููุถุน ุทุนุงู ุฌุฏูุฏ
                food = generateFood();
                // ุฒูุงุฏุฉ ุงูุณุฑุนุฉ ููููุงู (ุชูููู ููุช gameSpeed ุจู 5ุ ุจุญุฏ ุฃุฏูู 50)
                gameSpeed = Math.max(50, gameSpeed - 5);
            } else {
                // ุฅุฐุง ูู ูุฃููุ ุฅุฒุงูุฉ ุฐูู ุงูุซุนุจุงู (ูุฌุนู ุงูุญุฑูุฉ ุชุจุฏู ูุฃููุง ุงูุฒูุงู)
                snake.pop();
            }
        }

        // ุฏุงูุฉ ุฑุณู ุงูุซุนุจุงู
        function drawSnake() {
            // ุชุนููู ููู ุฑุณู ุงูุซุนุจุงู ุงููุญุฏุฏ ูู ุงูุฅุนุฏุงุฏุงุช
            ctx.fillStyle = snakeColor;
            // ุงููุฑูุฑ ุนูู ูู ูุทุนุฉ ูู ุฌุณู ุงูุซุนุจุงู ูุฑุณููุง
            snake.forEach(segment => {
                ctx.fillRect(
                    // ุญุณุงุจ ุงูุฅุญุฏุงุซู ุงูุณููู (x) ุนูู ุงูููุญุฉ
                    segment.x * gridSize,
                    // ุญุณุงุจ ุงูุฅุญุฏุงุซู ุงูุตุงุฏู (y) ุนูู ุงูููุญุฉ
                    segment.y * gridSize,
                    // ุนุฑุถ ุงููุทุนุฉ (ุฃูู ุจู 2 ูุฅุถุงูุฉ ูุฌูุฉ/ุญุฏูุฏ ุจูู ุงููุทุน)
                    gridSize - 2,
                    // ุงุฑุชูุงุน ุงููุทุนุฉ
                    gridSize - 2
                );
            });
        }

        // ุฏุงูุฉ ุฑุณู ุงูุทุนุงู
        function drawFood() {
            // ุชุนููู ููู ุฑุณู ุงูุทุนุงู ุงููุญุฏุฏ ูู ุงูุฅุนุฏุงุฏุงุช
            ctx.fillStyle = foodColor;
            // ุฑุณู ูุฑุจุน ุงูุทุนุงู
            ctx.fillRect(
                food.x * gridSize,
                food.y * gridSize,
                gridSize - 2,
                gridSize - 2
            );
        }

        // ุฏุงูุฉ ุชูููุฏ ููุถุน ุนุดูุงุฆู ุฌุฏูุฏ ููุทุนุงู
        function generateFood() {
            let newFood;
            do {
                // ุชูููุฏ ุฅุญุฏุงุซูุงุช x ู y ุนุดูุงุฆูุฉ ุถูู ุญุฏูุฏ ุงูููุญุฉ
                newFood = {
                    x: Math.floor(Math.random() * tileCount),
                    y: Math.floor(Math.random() * tileCount)
                };
                // ุงูุชูุฑุงุฑ ุทุงููุง ุฃู ุงูููุถุน ุงูุฌุฏูุฏ ูุชูุงุทุน ูุน ุฃู ุฌุฒุก ูู ุฌุณู ุงูุซุนุจุงู
            } while (snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
            // ุฅุฑุฌุงุน ููุถุน ุงูุทุนุงู ุงูุฌุฏูุฏ
            return newFood;
        }

        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุธุงุฆู ุงูุชุญูู ูู ุญุงูุฉ ุงููุนุจุฉ (Collision, Game Over, Score). */
        /* ================================================================= */

        // ุฏุงูุฉ ูุญุต ุงูุชุตุงุฏู (ุจุงูุฌุฏุฑุงู ุฃู ุจุงูุฐุงุช)
        function checkCollision() {
            const head = snake[0];

            // ุงูุชุญูู ูู ุชุตุงุฏู ุงูุฌุฏุงุฑ:
            if (
                // ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุณุฑ
                head.x < 0 ||
                // ุชุฌุงูุฒ ุงูุญุฏ ุงูุฃููู
                head.x >= tileCount ||
                // ุชุฌุงูุฒ ุงูุญุฏ ุงูุนููู
                head.y < 0 ||
                // ุชุฌุงูุฒ ุงูุญุฏ ุงูุณููู
                head.y >= tileCount
            ) {
                // ุงุณุชุฏุนุงุก ุฏุงูุฉ ููุงูุฉ ุงููุนุจุฉ ูู ุญุงูุฉ ุงูุชุตุงุฏู
                gameOver();
            }

            // ุงูุชุญูู ูู ุงูุชุตุงุฏู ุงูุฐุงุชู (ุงุตุทุฏุงู ุงูุฑุฃุณ ุจุฃู ุฌุฒุก ุขุฎุฑ ูู ุงูุฌุณู)
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    // ุงุณุชุฏุนุงุก ุฏุงูุฉ ููุงูุฉ ุงููุนุจุฉ ูู ุญุงูุฉ ุงูุชุตุงุฏู
                    gameOver();
                }
            }
        }

        // ุฏุงูุฉ ุงูุชุนุงูู ูุน ููุงูุฉ ุงููุนุจุฉ (Game Over)
        function gameOver() {
            // ุฅููุงู ุญููุฉ ุงููุนุจุฉ
            clearTimeout(gameLoopId);

            // ุชุญุฏูุซ ูุนุฑุถ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ
            finalScoreDisplay.textContent = `Score: ${score}`;

            // ุฅุฎูุงุก ุนูุงุตุฑ ุงููุนุจุฉ
            gameBoard.style.display = 'none';
            scoreDisplay.style.display = 'none';
            arrowsDiv.style.display = 'none'; // ุฅุฎูุงุก ุฃุฒุฑุงุฑ ุงูุฃุณูู
            // ุฅุธูุงุฑ ุดุงุดุฉ "ุงููุนุจุฉ ุงูุชูุช"
            gameOverlay.style.display = 'block';
        }

        // ุฏุงูุฉ ุชุญุฏูุซ ุนุฑุถ ุงููุชูุฌุฉ
        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
        }

        // ุฏุงูุฉ ุญููุฉ ุงููุนุจุฉ ุงูุฑุฆูุณูุฉ
        function gameLoop() {
            // ุงุณุชุฏุนุงุก ูุธููุฉ drawGame ูุชุญุฏูุซ ุฎุทูุฉ ูุงุญุฏุฉ ูู ุงููุนุจุฉ
            drawGame();
            // ุงุณุชุฎุฏุงู setTimeout ูุน requestAnimationFrame ูุฅูุดุงุก ุญููุฉ ูุชูุฑุฑุฉ ุจุงูุณุฑุนุฉ ุงููุญุฏุฏุฉ
            gameLoopId = setTimeout(() => requestAnimationFrame(gameLoop), gameSpeed);
        }

        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ูุธุงุฆู ุงูุชุญูู ูู ุงูุงุชุฌุงู (Direction Control). */
        /* ================================================================= */

        // ุฅุถุงูุฉ ูุณุชูุน ุญุฏุซ (Event Listener) ูููุญุฉ ุงูููุงุชูุญ ููุชุญูู ุจุงููุนุจุฉ
        document.addEventListener('keydown', changeDirection);

        // ุฏุงูุฉ ุชุบููุฑ ุงุชุฌุงู ุงูุซุนุจุงู ุจูุงุกู ุนูู ุถุบุทุฉ ุงูููุชุงุญ
        function changeDirection(event) {
            // ุชุนุฑูู ุฑููุฒ ููุงุชูุญ ุงูุฃุณูู
            const LEFT_KEY = 37;
            const RIGHT_KEY = 39;
            const UP_KEY = 38;
            const DOWN_KEY = 40;

            // ุฌูุจ ุฑูุฒ ุงูููุชุงุญ ุงููุถุบูุท
            const keyPressed = event.keyCode;
            // ุชุญุฏูุฏ ุงูุงุชุฌุงู ุงูุญุงูู
            const goingUp = dy === -1;
            const goingDown = dy === 1;
            const goingRight = dx === 1;
            const goingLeft = dx === -1;

            // ููุทู ุชุบููุฑ ุงูุงุชุฌุงู (ูููุน ุงูุงูุนูุงุณ ุงูููุฑู)
            // ุฅุฐุง ุถุบุท ูุณุงุฑ ููู ููู ูุชุฌูุงู ูููููู
            if (keyPressed === LEFT_KEY && !goingRight) {
                dx = -1;
                dy = 0;
            }
            // ุฅุฐุง ุถุบุท ุฃุนูู ููู ููู ูุชุฌูุงู ููุฃุณูู
            if (keyPressed === UP_KEY && !goingDown) {
                dx = 0;
                dy = -1;
            }
            // ุฅุฐุง ุถุบุท ูููู ููู ููู ูุชุฌูุงู ูููุณุงุฑ
            if (keyPressed === RIGHT_KEY && !goingLeft) {
                dx = 1;
                dy = 0;
            }
            // ุฅุฐุง ุถุบุท ุฃุณูู ููู ููู ูุชุฌูุงู ููุฃุนูู
            if (keyPressed === DOWN_KEY && !goingUp) {
                dx = 0;
                dy = 1;
            }
        }

        // ุฏุงูุฉ ูุณุงุนุฏุฉ ูุชุดุบูู ุงูุฃุณูู ุงูููุฌูุฏุฉ ูู HTML (ููุชุญูู ุจุงูููุณ/ุงููุงูุณ)
        function simulateKeyPress(keyCode) {
            // ุชุณุชุฏุนู ุฏุงูุฉ ุชุบููุฑ ุงูุงุชุฌุงู ุงูุฑุฆูุณูุฉ ูุถูุงู ุชุทุจูู ููุงุนุฏ ุงูุญุฑูุฉ (ููุน ุงูุงูุนูุงุณ)
            changeDirection({ keyCode: keyCode });
        }


        /* ================================================================= */
        /* ุชุนููู ูุจูุฑ: ุฅุนุฏุงุฏุงุช ุฃุฒุฑุงุฑ ุงููุงุฌูุฉ (ุฅุนุงุฏุฉ ุงููุนุจุ ุจุฏุก ุงููุนุจุฉ). */
        /* ================================================================= */

        // ุฅูุดุงุก ุฒุฑ "ุงูุนุจ ูุฑุฉ ุฃุฎุฑู" ุจุฑูุฌูุงู
        const restartButton = document.createElement('button');
        // ุชุนููู ูุต ุงูุฒุฑ
        restartButton.textContent = 'Play Again';
        // ุฅุถุงูุฉ ูุณุชูุน ุญุฏุซ ููุฒุฑ ููููู ุจุงูุนูุฏุฉ ุฅูู ุดุงุดุฉ ุงูุจุฏุงูุฉ ุนูุฏ ุงูููุฑ
        restartButton.addEventListener('click', showStartScreen);
        // ุฅุถุงูุฉ ุงูุฒุฑ ุฅูู ุดุงุดุฉ "ุงููุนุจุฉ ุงูุชูุช"
        gameOverlay.appendChild(restartButton);

        // ุฅุถุงูุฉ ูุณุชูุน ุญุฏุซ ูุฒุฑ "ุจุฏุก ุงููุนุจุฉ" ูุจุฏุก ุงูุชููุฆุฉ
        startButton.addEventListener('click', initializeGame);

    </script>
</body>

</html>